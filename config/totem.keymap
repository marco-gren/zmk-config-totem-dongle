#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>

#define Base        0
#define Nav         1
#define Sym         2

&mt {
    quick-tap-ms = <100>;
    global-quick-tap;
    flavor = "tap-preferred";
    tapping-term-ms = <170>;
};

&lt {
    tapping-term-ms = <240>;
    flavor = "balanced";
    quick-tap-ms = <150>;
};

/ {
    behaviors {
        hm: homerow_mods {
            compatible = "zmk,behavior-hold-tap";
            label = "HOMEROW_MODS";
            #binding-cells = <2>;
            flavor = "tap-preferred";
            tapping-term-ms = <200>;
            quick-tap-ms = <125>;
            global-quick-tap;
            bindings = <&kp>, <&kp>;
        };
    };

    combos {
        compatible = "zmk,combos";
        
        // German umlauts with ALT + a/o/u
        combo_a_umlaut {
            timeout-ms = <50>;
            key-positions = <11 20>;
            bindings = <&kp RA(Q)>; // ä - LALT + a
        };
        
        combo_o_umlaut {
            timeout-ms = <50>;
            key-positions = <11 28>;
            bindings = <&kp RA(P)>; // ö - LALT + o
        };
        
        combo_u_umlaut {
            timeout-ms = <50>;
            key-positions = <11 27>;
            bindings = <&kp RA(Y)>; // ü - LALT + u
        };
    };

    keymap {
        compatible = "zmk,keymap";
        
        Base {
            display-name = "Base";
            bindings = <
                &kp Q       &kp W       &kp E          &kp R         &kp T        &kp Z    &kp U        &kp I        &kp O       &kp P
                &hm LGUI A  &hm LALT S  &hm LCTRL D    &hm LSHIFT F  &kp G        &kp H    &hm RSHFT J  &hm RCTRL K  &hm RALT L  &hm RGUI HASH
<<<<<<< HEAD
                &kp Y       &kp X       &kp C          &kp V         &kp B        &kp N    &kp M        &kp COMMA    &kp DOT     &kp MINUS
                                        &mt LCTRL DEL  &lt Nav TAB   &kp SPACE    &kp RET  &lt Sym BSPC  &kp MINUS
            >;
        };
        
        Nav {
            display-name = "Navigation";
            bindings = <
                &kp ESC     &kp HOME    &kp UP       &kp END      &kp PG_UP     &kp N7   &kp N8   &kp N9   &kp SLASH   &kp ASTRK
                &kp TAB     &kp LEFT    &kp DOWN     &kp RIGHT    &kp PG_DN     &kp N4   &kp N5   &kp N6   &kp PLUS    &kp MINUS
                &kp DEL     &kp INS     &kp LCTRL    &kp LSHFT    &kp LALT      &kp N1   &kp N2   &kp N3   &kp EQUAL   &kp DOT
                                        &trans       &trans       &trans        &kp N0   &kp DOT  &kp ENTER
            >;
        };
        
        Sym {
            display-name = "Symbols";
            bindings = <
                &kp F1      &kp F2      &kp F3      &kp F4       &kp F5        &kp F6      &kp F7      &kp F8      &kp F9      &kp F10
                &kp EXCL    &kp AT      &kp HASH    &kp DLLR     &kp PRCNT     &kp CARET   &kp AMPS    &kp ASTRK   &kp F11     &kp F12
                &kp LPAR    &kp LBRC    &kp LBKT    &kp LT       &kp PIPE      &kp GT      &kp RBKT    &kp RBRC    &kp RPAR    &kp BSLH
                                        &trans      &trans       &trans        &trans      &trans      &trans
=======
&studio_unlock  &kp Y       &kp X       &kp C          &kp V         &kp B        &kp N    &kp M        &kp COMMA    &kp DOT     &kp MINUS      &kp APOSTROPHE
                                        &mt LCTRL DEL  &lt 0 TAB     &kp SPACE    &kp RET  &lt 0 BSPC   &kp MINUS
            >;
        };

        layer_1 {
            bindings = <
        &trans  &trans  &trans  &trans  &trans    &trans  &trans  &trans  &trans  &trans
        &trans  &trans  &trans  &trans  &trans    &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans    &trans  &trans  &trans  &trans  &trans  &trans
                        &trans  &trans  &trans    &trans  &trans  &trans
>>>>>>> 652b37dc9abedb46a35b93013ccddada645b33f2
            >;
        };
    };
};